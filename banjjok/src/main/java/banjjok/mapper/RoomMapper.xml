<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTO Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="banjjok.mapper.RoomMapper">
<sql id="baseColumn">
	ROOM_CODE, ROOM_NAME, ROOM_IMG, ROOM_PRICE, ROOM_DESC
</sql>
<sql id="baseColumn2">
	ROOM_CODE roomCode, ROOM_NAME roomName, ROOM_IMG roomImg, ROOM_PRICE roomPrice, ROOM_DESC roomDesc
</sql>
<insert id="insertRoom" parameterType="banjjok.domain.RoomDTO">
	insert into ROOM ( <include refid="baseColumn" />  )
	values( #{roomCode}, #{roomName}, #{roomImg}, #{roomPrice}, #{roomDesc} )
</insert>
<select id="getRoomList" parameterType="banjjok.domain.RoomDTO" resultType="banjjok.domain.RoomDTO">
	select * 
	from( select ROWNUM RN, <include refid="baseColumn2" /> 
		from ( select <include refid="baseColumn" />
				from ROOM
				<trim prefix="where" prefixOverrides="AND | OR">
				<if test="roomCode != null">
					ROOM_CODE = #{roomCode}
				</if>
			</trim>
			order by ROOM_CODE DESC
			)
		)
</select>
</mapper>
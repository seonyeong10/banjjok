<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTO Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="banjjok.mapper.SalonReserveMapper">
<sql id="column">
	RESERV_CODE, PET_ID, MEM_ID, SERVICE_CODE,DESN_ID, RESERV_DATE, RESERV_TIME, RESERV_DESC, service_name, service_fee, desn_name, pet_name, mem_name
</sql>
<sql id="resList">
	RESERV_CODE,RESERV_DATE,RESERV_TIME,RESERV_DESC,RESERV_USE
</sql>
<sql id="payment">
	RESERV_CODE,PAY_METHOD,TOTAL_FEE
</sql>
<select id="getCode" resultType="string">
	select to_char(sysdate, 'YYMMDD') || lpad(reserve_salon_seq.NEXTVAL,3,0) from dual
</select>
<insert id="insertRes" parameterType="banjjok.domain.SalonReserveDTO">
	insert into reserve_salon (<include refid="column" />)
	values(#{reservCode},#{petId}, #{memId}, #{serviceCode}, #{desnId}, #{reservDate}, #{reservTime}, #{reservDesc}, 
	#{serviceName}, #{serviceFee}, #{desnName}, #{petName}, #{memName})
</insert>
<insert id="insertResList" parameterType="banjjok.domain.SalonReserveDTO">
	insert into reserve_list_salon (<include refid="resList" />)
	values (#{reservCode},#{reservDate},#{reservTime},#{reservDesc},'0')
</insert>
<insert id="insertPay" parameterType="banjjok.domain.SalonPayDTO">
	insert into payment_salon(<include refid="payment" />)
	values(#{reservCode},#{payMethod},#{totalFee})
</insert>
</mapper>